---
title: "Getting Hitched: Torontonians Prefer to Get Married During Warm Weather"
author: Diana Liu
thanks: "Code and data are available at: https://github.com/Diana-Guanzhi-Liu/Term-Paper-1."
date: 25 January 2024
abstract: "We examine marriage licenses obtained in the city of Toronto in the year 2023 by months. By dividing the year into warm months (April, May, June, July, August, September) and cold months (October, November, December, January, Febuary, March), the number of marriage licenses obtained in Toronto increase significantly during warm months, supporting the hypothesis that Torontonians prefer to get married during warm weather. Further analysis should be conducted to determine whether or not this results in longer wait times for marriage licenses and more expensive ceremonies as demand is higher during the peak season."
format: pdf
number-sections: true
bibliography: references.bib
---

```{r}
#| include: false
#| warning: false
#| message: false

library(opendatatoronto)
library(tidyverse)
library(dplyr)
library(stringr)
library(ggplot2)
```


# Introduction
According to @citebusinessinsider, summer is the hottest time to get married due to more dress options, the option to have an outdoor wedding, and relatively easier travel among other reasons, but is this actually true for a city like Toronto? Toronto is a city known for cold weather in the winter with snow from October to March (@citeurbanclimate). This means that we expect the amount of marriage licenses obtained in Toronto should increase during the warm months of April through September and decrease during the cold months of October through March.

In order to test this hypothesis, we download marriage license data from opendatatoronto, a database maintained by the City of Toronto and analyze the data by plotting the number of licenses against the month in which they were obtained. Our results show that our hypothesis is correct with the number of marriage licenses steadily increasing from Febuary to May, peaking in August, then decreasing between August and November before hitting its lowest in January. This cyclic nature can be observed for the prior 2 years as well.  
```{r}
#| echo: false
#| message: false

marriage_data <- read_csv("/cloud/project/outputs/data/cleaned_data.csv")
print(marriage_data)
```



# Data {#sec-data}
Our data is Marriage Licence Statistics from Open Data Toronto (@opendatatoronto) which contains data sets maintained by the City of Toronto. The Marriage Licence Statistics dataset consists of monthly number of marriage licenses obtained from 2011 to 2023 in the Greater Toronto Area, it was last updated 2024-01-14. No similar data sets could have been used because this dataset is the only one of marriage licences. The Marriage Licence Statistics dataset contains only four variables: x_id, civic centres, marriage licenses, and date, but only civic centres, marriage licenses, and date were used in our analysis. The data was cleaned and analysed using the statistical software R (@R) with the assistance of tidyverse (@tidy), dyplr (@dyplr), ggplot2(@citeggplot2), and stringr (@stringr).

## Civic Centres
CIVIC_CENTRE is a column a two letter abbreviation of the city in which the marriage licenses are issued, ET for Etobicoke NY for North York, SC for Scarborough, and TO for Toronto. Each civic centre has its own row of corresponding date, number of marriage licenses, and id. During the data cleaning process, we filter out ET, NY, and SC so we can focus on Toronto. After filtering, we will not need the variable anymore. 
```{r}
#| echo: false
#| message: false

raw_marriage_data <- read_csv("/cloud/project/inputs/data/unedited_data.csv")
head(raw_marriage_data)
```

## Marriage Licenses
MARRIAGE_LICENSES is the variable denoting how many licenses were obtained each month, with a max of 1649 certificates obtained, min of 563, and average of 1058.8 in Toronto in 2023. Marriage licenses are obtained in the province of Ontario via an online application process followed by an in-person appointment at the Toronto City Hall. The actual wedding ceremony is irrelevant for obtaining a marriage license.  
```{r}
#| echo: false
#| message: false

marriage_data <- read_csv("/cloud/project/outputs/data/cleaned_data.csv")

head(marriage_data)
summary(marriage_data$Marriages)
```
 
## Date (Month)
TIME_PERIOD is the month in which the marriage licenses were obtained in a yyyy-mm date format. When we clean the data, the date is filtered by year to retain only 2023 information, then it is reformatted so that it is the name of the month (e.g. 'January')




# Results


```{r}
#| echo: false
marriage_data <- read_csv("/cloud/project/outputs/data/cleaned_data.csv")

marriage_data |>
  ggplot(aes(x = Month, y = Marriages, label = Marriages)) +
  geom_point() +
  geom_path(color = "red") +
  geom_text(hjust=0, vjust=0) +
  theme(axis.text.x = element_text(angle = 0, vjust = 0.5)) +
  labs(x = "Month", y = "Marriages", color = "Country")
```





# Discussion

## First discussion point {#sec-first-point}

If my paper were 10 pages, then should be be at least 2.5 pages. The discussion is a chance to show off what you know and what you learnt from all this. 

## Second discussion point

## Third discussion point

## Weaknesses and next steps

Weaknesses and next steps should also be included.

\newpage

\appendix

# Appendix {-}


# Additional data details

# Model details {#sec-model-details}

## Posterior predictive check

In @fig-ppcheckandposteriorvsprior-1 we implement a posterior predictive check. This shows...

In @fig-ppcheckandposteriorvsprior-2 we compare the posterior with the prior. This shows... 



\newpage


# References



